ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "1 year", # Show a break every year
limits = c(as.Date("1980-01-01"), as.Date("2019-12-31")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=20)) +
labs(x="",y="Political Ecology Index")
View(data3)
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "1 year", # Show a break every year
limits = c(as.Date("1980-01-01"), as.Date("2019-12-31")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "5 year", # Show a break every year
limits = c(as.Date("1980-01-01"), as.Date("2025-12-31")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "5 year", # Show a break every year
limits = c(as.Date("1980-01-01"), as.Date("2021-12-31")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "5 year", # Show a break every year
limits = c(as.Date("1980-01-01"), as.Date("2025-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "5 year", # Show a break every year
limits = c(as.Date("1980-01-01"), as.Date("2023-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "5 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2023-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "3 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2023-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "3 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2021-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "3 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2022-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "3 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2022-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "3 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2021-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev,colour=partyabbrev)) +
geom_point(size=3.5) +
geom_line(size=1.5) +
scale_color_manual(values =  group.colors) +
scale_y_continuous(breaks=c(seq(0,20,5)), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",     # Show only the year
date_breaks = "3 year", # Show a break every year
limits = c(as.Date("1975-01-01"), as.Date("2020-01-01")) # Limit the x-axis from 1990 to 2023
) +
theme_bw() +
theme(axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position="bottom",
legend.title=element_blank(),
text = element_text(size=30)) +
labs(x="",y="Political Ecology Index")
data3 <- data2 %>%
select("countryname","edate","partyabbrev","poleco","per416","per501","per416_1","per416_2")
colnames(data3)[colnames(data3) %in% c("poleco", "per416", "per501", "per416_1", "per416_2")] <-
c("PolEcoIndex", "Anti-Grow", "EnvProt", "Anti-Eco", "Sustain")
data3$edate <- as.Date(data3$edate, format = "%d/%m/%Y")
group.colors <- c("ND" = "grey27", PP = "lightblue", "PSD" = "blue", AP = "grey", "LAOS" = "darkblue", "XA" = "gold", "EL" = "purple",  VOX = "darkgreen", "C's" = "orange",
"Enough" = "blue4")
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev, colour = partyabbrev)) +
geom_point(size = 3.5) +
geom_line(size = 1.5) +
scale_color_manual(values = group.colors) +
scale_y_continuous(breaks = seq(0, 20, 5), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",
date_breaks = "3 years",
limits = c(as.Date("1975-01-01"), as.Date("2020-01-01"))
) +
theme_bw() +
theme(
axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position = "bottom",
legend.title = element_blank(),
text = element_text(size = 30)
) +
labs(x = "", y = "Political Ecology Index") +
facet_wrap(~ countryname, nrow = 3)
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev, colour = partyabbrev)) +
geom_point(size = 3.5) +
geom_line(size = 1.5) +
scale_color_manual(values = group.colors) +
scale_y_continuous(breaks = seq(0, 20, 5), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",
date_breaks = "3 years",
limits = c(as.Date("1975-01-01"), as.Date("2020-01-01"))
) +
theme_bw() +
theme(
axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position = "right",            # move legend to the right
legend.direction = "vertical",         # vertical legend
legend.title = element_blank(),
legend.box = "vertical",               # stack the legend vertically
text = element_text(size = 30)
) +
labs(x = "", y = NULL) +                 # remove y-axis label
facet_wrap(~ countryname, nrow = 3)
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev, colour = partyabbrev)) +
geom_point(size = 3.5) +
geom_line(size = 1.5) +
scale_color_manual(values = group.colors) +
scale_y_continuous(breaks = seq(0, 20, 5), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",
date_breaks = "3 years",
limits = c(as.Date("1975-01-01"), as.Date("2020-01-01"))
) +
theme_bw() +
theme(
axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position = "bottom",            # move legend to bottom
legend.direction = "horizontal",       # horizontal layout
legend.title = element_blank(),
text = element_text(size = 30)
) +
labs(x = "", y = NULL) +                 # remove y-axis label
facet_wrap(~ countryname, nrow = 3)
data3 %>%
filter(!is.na(PolEcoIndex)) %>%
ggplot(aes(x = edate, y = PolEcoIndex, group = partyabbrev, colour = partyabbrev)) +
geom_point(size = 3.5) +
geom_line(size = 1.5) +
scale_color_manual(values = group.colors) +
scale_y_continuous(breaks = seq(0, 20, 5), limits = c(0, 20)) +
scale_x_date(
date_labels = "%Y",
date_breaks = "3 years",
limits = c(as.Date("1975-01-01"), as.Date("2020-01-01"))
) +
theme_bw() +
theme(
axis.text.x = element_text(angle = 35, hjust = 1, vjust = 1),
legend.position = "bottom",            # bottom
legend.direction = "horizontal",       # horizontal
legend.title = element_blank(),
text = element_text(size = 30)
) +
guides(color = guide_legend(nrow = 1)) +  # one row legend
labs(x = "", y = NULL) +                  # remove y-axis label
facet_wrap(~ countryname, nrow = 3)
View(data3)
write.xlsx(data3, "taula.xlsx")
library(xlsx)
install.packages("xlsx")
library(xlsx)
write.xlsx(data3, "taula.xlsx")
library(openxlsx2)
install.packages("openxlsx2")
library(openxlsx2)
wb_save(data3, file = "data3_export.xlsx")
wb <- wb_workbook()
# Add a worksheet
wb <- wb_add_worksheet(wb, sheet = "Sheet1")
# Add the data to the worksheet
wb <- wb_add_data(wb, sheet = "Sheet1", x = data3)
# Save workbook
wb_save(wb, "data3_export.xlsx")
# Save workbook
wb_save(wb, "C:/Users/marcs/Google Drive/1.Publicacions/En curs/2023/Climate_PP_2023/Data/data3_export.xlsx")
library(ggplot2)
library(dplyr)
# Dades amb percentatges de vot
erc_data <- data.frame(
Any = c(1987, 1991, 1995, 1999, 2003, 2007, 2011, 2015, 2019, 2023),
Percentatge = c(13.26, 24.71, 20.69, 12.42, 19.59, 15.27, 5.03, 27.35, 34.8, 22.33)
)
# Gràfic de barres per percentatge de vot
ggplot(erc_data, aes(x = factor(Any), y = Percentatge)) +
geom_bar(stat = "identity", fill = "#E60026") +
labs(
title = "Percentatge de vot d'ERC a les Eleccions Municipals",
x = "Any",
y = "Percentatge de vot (%)"
) +
theme_minimal()
library(ggplot2)
library(dplyr)
# Dades combinades
erc_data <- data.frame(
Any = c(1980, 1984, 1988, 1992, 1995, 1999, 2003, 2006, 2007, 2010, 2011, 2012, 2015, 2017, 2019, 2021, 2023, 2024),
Percentatge = c(10.37, 4.43, 4.17, 8.13, 9.49, 8.69, 16.44, 14.06, 15.27, 7.00, 5.03, 13.68, 27.35, 21.39, 34.80, 21.29, 22.33, 13.68),
Eleccions = c("Parlament", "Parlament", "Parlament", "Parlament", "Parlament", "Parlament", "Parlament", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament")
)
# Gràfic comparatiu
ggplot(erc_data, aes(x = Any, y = Percentatge, color = Eleccions)) +
geom_line(size = 1.2) +
geom_point(size = 2) +
scale_y_continuous(labels = function(x) paste0(x, "%")) +
labs(
title = "Evolució del percentatge de vot d'ERC a Cardedeu i a Catalunya",
x = NULL,
y = NULL,
color = "Tipus d'elecció"
) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank()
)
library(ggplot2)
library(dplyr)
# Dades combinades
erc_data <- data.frame(
Any = c(1980, 1984, 1987, 1988, 1991, 1992, 1995, 1999, 2003, 2006, 2007, 2010, 2011, 2012, 2015, 2017, 2019, 2021, 2023, 2024),
Percentatge = c(8.90, 4.41, 13.26, 4.17, 24.71, 7.96, 20.69, 12.42, 19.59, 14.03, 15.27, 7.00, 5.03, 13.68, 27.35, 21.39, 34.80, 21.29, 22.33, 13.68),
Eleccions = c(
"Parlament", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Municipals", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Parlament"
)
)
# Gràfic
ggplot(erc_data, aes(x = factor(Any), y = Percentatge, fill = Eleccions)) +
geom_bar(stat = "identity", position = "dodge", width = 0.7) +
scale_y_continuous(labels = function(x) paste0(x, "%")) +
labs(
title = "Evolució del percentatge de vot d'ERC",
subtitle = "Eleccions municipals a Cardedeu i Parlament de Catalunya",
x = NULL,
y = NULL,
fill = "Tipus d'elecció"
) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank()
)
library(ggplot2)
library(dplyr)
# Dades combinades
erc_data <- data.frame(
Any = c(1980, 1984, 1987, 1988, 1991, 1992, 1995, 1999, 2003, 2006, 2007, 2010, 2011, 2012, 2015, 2017, 2019, 2021, 2023, 2024),
Percentatge = c(8.90, 4.41, 13.26, 4.17, 24.71, 7.96, 20.69, 12.42, 19.59, 14.03, 15.27, 7.00, 5.03, 13.68, 27.35, 21.39, 34.80, 21.29, 22.33, 13.68),
Eleccions = c(
"Parlament", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Municipals", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Parlament"
)
)
# Gràfic amb etiquetes d'anys i percentatges
ggplot(erc_data, aes(x = factor(Any), y = Percentatge, fill = Eleccions)) +
geom_bar(stat = "identity", position = "dodge", width = 0.7) +
scale_y_continuous(labels = function(x) paste0(x, "%")) +
labs(
title = "Evolució del percentatge de vot d'ERC",
subtitle = "Eleccions municipals a Cardedeu i Parlament de Catalunya",
x = NULL,
y = NULL,
fill = "Tipus d'elecció"
) +
geom_text(aes(label = paste0(Percentatge, "%")),
position = position_dodge(width = 0.7),
vjust = -0.5,
size = 3) + # Ajusta la mida de les etiquetes si cal
theme_minimal() +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),  # Rotar les etiquetes d'anys
axis.text.y = element_text(),
axis.ticks = element_blank()
)
library(ggplot2)
library(dplyr)
# Dades combinades (afegint les noves dades)
erc_data <- data.frame(
Any = c(1980, 1984, 1987, 1988, 1991, 1992, 1995, 1999, 2003, 2006, 2007, 2010, 2011, 2012, 2015, 2017, 2019, 2021, 2023, 2024),
Percentatge = c(8.90, 4.41, 13.26, 4.17, 24.71, 7.96, 9.49, 8.67, 16.5, 14.03, 15.27, 7.00, 5.03, 13.68, 27.35, 21.39, 34.80, 21.29, 22.33, 13.68),
Eleccions = c(
"Parlament", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Parlament", "Parlament", "Parlament", "Municipals", "Municipals", "Parlament",
"Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Parlament"
)
)
# Gràfic amb etiquetes d'anys i percentatges
ggplot(erc_data, aes(x = factor(Any), y = Percentatge, fill = Eleccions)) +
geom_bar(stat = "identity", position = "dodge", width = 0.7) +
scale_y_continuous(labels = function(x) paste0(x, "%")) +
labs(
title = "Evolució del percentatge de vot d'ERC",
subtitle = "Eleccions municipals a Cardedeu i Parlament de Catalunya",
x = NULL,
y = NULL,
fill = "Tipus d'elecció"
) +
geom_text(aes(label = paste0(Percentatge, "%")),
position = position_dodge(width = 0.7),
vjust = -0.5,
size = 3) + # Ajusta la mida de les etiquetes si cal
theme_minimal() +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),  # Rotar les etiquetes d'anys
axis.text.y = element_text(),
axis.ticks = element_blank()
)
library(ggplot2)
library(dplyr)
# Dades combinades amb correccions
erc_data <- data.frame(
Any = c(1980, 1984, 1987, 1988, 1991, 1992, 1995, 1999, 2003, 2006, 2007, 2010, 2011, 2012, 2015, 2017, 2019, 2021, 2023, 2024),
Percentatge = c(8.90, 4.41, 13.26, 4.17, 24.71, 7.96, 9.49, 8.67, 16.5, 14.03, 15.27, 7.00, 5.03, 13.68, 27.35, 21.39, 34.80, 21.29, 22.33, 13.68),
Eleccions = c(
"Parlament", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Parlament", "Parlament", "Parlament", "Municipals", "Municipals", "Parlament",
"Municipals", "Parlament", "Municipals", "Parlament", "Municipals", "Parlament",
"Municipals", "Parlament"
)
)
# Gràfic amb etiquetes d'anys i percentatges
ggplot(erc_data, aes(x = factor(Any), y = Percentatge, fill = Eleccions)) +
geom_bar(stat = "identity", position = "dodge", width = 0.7) +
scale_y_continuous(labels = function(x) paste0(x, "%")) +
labs(
title = "Evolució del percentatge de vot d'ERC",
subtitle = "Eleccions municipals a Cardedeu i Parlament de Catalunya",
x = NULL,
y = NULL,
fill = "Tipus d'elecció"
) +
geom_text(aes(label = paste0(Percentatge, "%")),
position = position_dodge(width = 0.7),
vjust = -0.5,
size = 3) + # Ajusta la mida de les etiquetes si cal
theme_minimal() +
theme(
axis.text.x = element_text(angle = 45, hjust = 1),  # Rotar les etiquetes d'anys
axis.text.y = element_text(),
axis.ticks = element_blank()
)
